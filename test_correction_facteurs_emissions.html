<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Correction Facteurs d'√âmission - Niveau 2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .problem-section {
            background: #f8d7da;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #dc3545;
            margin: 20px 0;
        }
        .problem-section h3 {
            color: #721c24;
            margin-top: 0;
        }
        .solution-section {
            background: #d4edda;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            margin: 20px 0;
        }
        .solution-section h3 {
            color: #155724;
            margin-top: 0;
        }
        .test-section {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #007acc;
            margin: 20px 0;
        }
        .test-section h3 {
            color: #007acc;
            margin-top: 0;
        }
        .input-group {
            margin: 15px 0;
        }
        .input-group label {
            display: inline-block;
            width: 250px;
            font-weight: bold;
        }
        .input-group input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 150px;
        }
        .btn {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .btn:hover {
            background: #005a9e;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .result {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .result.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        .result.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        .formula {
            background: #e6f3ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007acc;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>üîß Test Correction Facteurs d'√âmission - Niveau 2</h1>
    
    <div class="container">
        <h2>üìã Probl√®me Identifi√©</h2>
        
        <div class="problem-section">
            <h3>‚ùå Calcul Incorrect (Avant) :</h3>
            <p><strong>Confusion entre deux types de facteurs d'√©mission :</strong></p>
            <ul>
                <li><strong>Facteur v√©hicule :</strong> 1945 g CO2e/t.km (√©missions par tonne-kilom√®tre)</li>
                <li><strong>Facteur √©nergie :</strong> 3.17 kg CO2e/L (√©missions par litre de carburant)</li>
            </ul>
            <p>Le code utilisait incorrectement le facteur du v√©hicule comme s'il √©tait un facteur d'√©mission par kilom√®tre.</p>
        </div>
        
        <div class="solution-section">
            <h3>‚úÖ Solution Impl√©ment√©e (Apr√®s) :</h3>
            <p><strong>Distinction claire entre les deux niveaux :</strong></p>
            <ul>
                <li><strong>Niveau 1 :</strong> Utilise le facteur v√©hicule (1945 g CO2e/t.km)</li>
                <li><strong>Niveau 2 :</strong> Utilise le facteur √©nergie (3.17 kg CO2e/L)</li>
            </ul>
        </div>
    </div>
    
    <div class="container">
        <h2>üßÆ Test des Calculs Corrig√©s</h2>
        
        <div class="test-section">
            <h3>Donn√©es du v√©hicule VUL3.5express :</h3>
            <div class="input-group">
                <label>Facteur v√©hicule (niveau 1) :</label>
                <input type="number" id="facteur-vehicule" value="1945" step="0.001" min="0"> g CO2e/t.km
            </div>
            <div class="input-group">
                <label>Facteur √©nergie (niveau 2) :</label>
                <input type="number" id="facteur-energie" value="3.17" step="0.001" min="0"> kg CO2e/L
            </div>
            <div class="input-group">
                <label>Consommation du v√©hicule :</label>
                <input type="number" id="consommation-vehicule" value="16" step="0.1" min="0"> L/100km
            </div>
            <div class="input-group">
                <label>Poids transport√© :</label>
                <input type="number" id="poids-transport" value="0.26" step="0.001" min="0"> tonnes
            </div>
            <div class="input-group">
                <label>Distance :</label>
                <input type="number" id="distance" value="100" step="0.1" min="0"> km
            </div>
            
            <button class="btn btn-success" onclick="calculerEmissions()">Calculer les √©missions</button>
        </div>
        
        <div id="resultats" style="display: none;">
            <div class="container">
                <h3>üìä R√©sultats des calculs :</h3>
                
                <div class="result correct" id="niveau1-result">
                    <h4>üöõ Niveau 1 (Facteur v√©hicule) :</h4>
                    <div id="niveau1-details"></div>
                </div>
                
                <div class="result correct" id="niveau2-result">
                    <h4>‚õΩ Niveau 2 (Facteur √©nergie) :</h4>
                    <div id="niveau2-details"></div>
                </div>
                
                <div class="result" id="comparison-result">
                    <h4>üîç Comparaison et validation :</h4>
                    <div id="comparison-details"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <h2>üìö Explication des Formules</h2>
        
        <div class="formula">
            <h4>Niveau 1 (Facteur v√©hicule) :</h4>
            <p><strong>√âmissions = Poids √ó Distance √ó Facteur v√©hicule</strong></p>
            <p>Unit√©s : tonnes √ó km √ó (g CO2e/t.km) = g CO2e</p>
            <p>Conversion : g CO2e √∑ 1000 = kg CO2e</p>
        </div>
        
        <div class="formula">
            <h4>Niveau 2 (Facteur √©nergie) :</h4>
            <p><strong>√âmissions = Consommation totale √ó Facteur √©nergie</strong></p>
            <p>Unit√©s : L √ó (kg CO2e/L) = kg CO2e</p>
            <p>O√π : Consommation totale = (Consommation/100) √ó Distance</p>
        </div>
        
        <div class="formula">
            <h4>V√©rification coh√©rence :</h4>
            <p><strong>√âmissions par tonne-kilom√®tre = √âmissions totales √∑ (Poids √ó Distance)</strong></p>
            <p>Unit√©s : kg CO2e √∑ (tonnes √ó km) = kg CO2e/t.km</p>
        </div>
    </div>

    <script>
        function calculerEmissions() {
            // R√©cup√©rer les valeurs
            const facteurVehicule = parseFloat(document.getElementById('facteur-vehicule').value);
            const facteurEnergie = parseFloat(document.getElementById('facteur-energie').value);
            const consommationVehicule = parseFloat(document.getElementById('consommation-vehicule').value);
            const poidsTransport = parseFloat(document.getElementById('poids-transport').value);
            const distance = parseFloat(document.getElementById('distance').value);
            
            if (facteurVehicule <= 0 || facteurEnergie <= 0 || consommationVehicule <= 0 || poidsTransport <= 0 || distance <= 0) {
                alert('Veuillez saisir des valeurs positives pour tous les champs.');
                return;
            }
            
            // Calculs niveau 1 (facteur v√©hicule)
            const emissionsNiveau1G = facteurVehicule * poidsTransport * distance; // g CO2e
            const emissionsNiveau1Kg = emissionsNiveau1G / 1000; // kg CO2e
            const emissionsNiveau1Tkm = facteurVehicule / 1000; // kg CO2e/t.km
            
            // Calculs niveau 2 (facteur √©nergie)
            const consommationParKm = consommationVehicule / 100; // L/km
            const consommationTotale = consommationParKm * distance; // L
            const emissionsNiveau2 = consommationTotale * facteurEnergie; // kg CO2e
            const emissionsNiveau2Tkm = emissionsNiveau2 / (poidsTransport * distance); // kg CO2e/t.km
            
            // Affichage des r√©sultats
            document.getElementById('niveau1-details').innerHTML = `
                <p><strong>Facteur v√©hicule :</strong> ${facteurVehicule} g CO2e/t.km = ${emissionsNiveau1Tkm.toFixed(3)} kg CO2e/t.km</p>
                <p><strong>Calcul :</strong> ${poidsTransport} t √ó ${distance} km √ó ${emissionsNiveau1Tkm.toFixed(3)} kg CO2e/t.km</p>
                <p><strong>√âmissions totales :</strong> ${emissionsNiveau1Kg.toFixed(2)} kg CO2e</p>
                <p><strong>√âmissions par t.km :</strong> ${emissionsNiveau1Tkm.toFixed(3)} kg CO2e/t.km</p>
            `;
            
            document.getElementById('niveau2-details').innerHTML = `
                <p><strong>Facteur √©nergie :</strong> ${facteurEnergie} kg CO2e/L</p>
                <p><strong>Consommation par km :</strong> ${consommationVehicule} L/100km = ${consommationParKm.toFixed(3)} L/km</p>
                <p><strong>Consommation totale :</strong> ${consommationTotale.toFixed(2)} L</p>
                <p><strong>Calcul :</strong> ${consommationTotale.toFixed(2)} L √ó ${facteurEnergie} kg CO2e/L</p>
                <p><strong>√âmissions totales :</strong> ${emissionsNiveau2.toFixed(2)} kg CO2e</p>
                <p><strong>√âmissions par t.km :</strong> ${emissionsNiveau2Tkm.toFixed(3)} kg CO2e/t.km</p>
            `;
            
            // Comparaison et validation
            const difference = Math.abs(emissionsNiveau1Kg - emissionsNiveau2);
            const differencePourcentage = (difference / Math.max(emissionsNiveau1Kg, emissionsNiveau2)) * 100;
            
            let comparisonClass = 'correct';
            let comparisonMessage = '';
            
            if (differencePourcentage < 5) {
                comparisonClass = 'correct';
                comparisonMessage = `‚úÖ Les deux niveaux donnent des r√©sultats coh√©rents ! Diff√©rence : ${difference.toFixed(2)} kg CO2e (${differencePourcentage.toFixed(1)}%)`;
            } else if (differencePourcentage < 15) {
                comparisonClass = 'correct';
                comparisonMessage = `‚ö†Ô∏è Les r√©sultats sont acceptables. Diff√©rence : ${difference.toFixed(2)} kg CO2e (${differencePourcentage.toFixed(1)}%)`;
            } else {
                comparisonClass = 'incorrect';
                comparisonMessage = `‚ùå Les r√©sultats ne sont pas coh√©rents. Diff√©rence : ${difference.toFixed(2)} kg CO2e (${differencePourcentage.toFixed(1)}%)`;
            }
            
            document.getElementById('comparison-details').innerHTML = `
                <p><strong>Niveau 1 :</strong> ${emissionsNiveau1Kg.toFixed(2)} kg CO2e</p>
                <p><strong>Niveau 2 :</strong> ${emissionsNiveau2.toFixed(2)} kg CO2e</p>
                <p><strong>Diff√©rence :</strong> ${difference.toFixed(2)} kg CO2e</p>
                <p><strong>√âcart relatif :</strong> ${differencePourcentage.toFixed(1)}%</p>
                <p><strong>Validation :</strong> ${comparisonMessage}</p>
            `;
            
            document.getElementById('comparison-result').className = `result ${comparisonClass}`;
            
            // Afficher les r√©sultats
            document.getElementById('resultats').style.display = 'block';
        }
        
        // Calcul automatique au chargement
        document.addEventListener('DOMContentLoaded', function() {
            calculerEmissions();
        });
    </script>
</body>
</html>















